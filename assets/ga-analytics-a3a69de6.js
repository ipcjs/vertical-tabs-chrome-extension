var r=Object.defineProperty;var c=(s,e,t)=>e in s?r(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>(c(s,typeof e!="symbol"?e+"":e,t),t);(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="603b07fc-a361-42fb-930f-eee01da1e171",s._sentryDebugIdIdentifier="sentry-dbid-603b07fc-a361-42fb-930f-eee01da1e171")}catch{}})();var d=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};d.SENTRY_RELEASE={id:"2.1.19"};const l=()=>chrome.runtime.getManifest().version,f=()=>{var s;return(s=performance==null?void 0:performance.memory)==null?void 0:s.usedJSHeapSize},g="https://www.google-analytics.com/mp/collect",_="https://www.google-analytics.com/debug/mp/collect",u="G-PWTSXRQH0X",m="DyNrnsxiTyqDSUIi-vz_9w",y=100,w=30;class E{constructor(e=!1){i(this,"debug");this.debug=e}async getOrCreateClientId(){let{clientId:e}=await chrome.storage.local.get("clientId");return e||(e=self.crypto.randomUUID(),await chrome.storage.local.set({clientId:e})),e}async getOrCreateSessionId(){let{sessionData:e}=await chrome.storage.session.get("sessionData");const t=Date.now();return e&&e.timestamp&&((t-e.timestamp)/6e4>w?e=null:(e.timestamp=t,await chrome.storage.session.set({sessionData:e}))),e||(e={session_id:t.toString(),timestamp:t.toString()},await chrome.storage.session.set({sessionData:e})),e.session_id}async fireEvent(e,t={}){t.session_id||(t.session_id=await this.getOrCreateSessionId()),t.engagement_time_msec||(t.engagement_time_msec=y);const n=l();n&&(t.extension_version=n);const o=f();if(n&&(t.heap_size=o),this.debug){console.log("Event fired:",e,{...t,extension_version:n});return}try{await fetch(`${this.debug?_:g}?measurement_id=${u}&api_secret=${m}`,{method:"POST",body:JSON.stringify({client_id:await this.getOrCreateClientId(),events:[{name:e,params:t}]})})}catch(a){console.error("Google Analytics request failed with an exception",a)}}async firePageViewEvent(e,t){return this.fireEvent("page_view",{page_title:e,page_location:t})}async fireErrorEvent(e){return this.fireEvent("extension_error",{...e,message:e.message,stack:e.stack})}}const h=new E(!1);export{h as A};
//# sourceMappingURL=ga-analytics-a3a69de6.js.map
